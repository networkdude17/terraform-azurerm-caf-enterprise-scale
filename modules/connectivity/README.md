<!-- BEGIN_TF_DOCS -->
# Connectivity sub-module

> [!IMPORTANT]
> For new deployments we now recommend using Azure Verified Modules for Platform Landing Zones.
> Please see the documentation at <https://aka.ms/alz/tf>.
> This module will continue to be supported for existing deployments.

## Documentation
<!-- markdownlint-disable MD033 -->

## Requirements

No requirements.

## Modules

No modules.

<!-- markdownlint-disable MD013 -->
<!-- markdownlint-disable MD034 -->
## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_enabled"></a> [enabled](#input\_enabled) | Controls whether to manage the connectivity landing zone policies and deploy the connectivity resources into the current Subscription context. | `bool` | n/a | yes |
| <a name="input_root_id"></a> [root\_id](#input\_root\_id) | Specifies the ID of the Enterprise-scale root Management Group, used as a prefix for resources created by this module. | `string` | n/a | yes |
| <a name="input_subscription_id"></a> [subscription\_id](#input\_subscription\_id) | Specifies the Subscription ID for the Subscription containing all connectivity resources. | `string` | n/a | yes |
| <a name="input_custom_azure_backup_geo_codes"></a> [custom\_azure\_backup\_geo\_codes](#input\_custom\_azure\_backup\_geo\_codes) | If specified, the custom\_azure\_backup\_geo\_codes variable will override or append Geo Codes (value) used to generate region-specific DNS zone names for Azure Backup private endpoints.<br>For more information, please refer to: https://learn.microsoft.com/azure/backup/private-endpoints#when-using-custom-dns-server-or-host-files | `map(string)` | `{}` | no |
| <a name="input_custom_privatelink_azurestaticapps_partitionids"></a> [custom\_privatelink\_azurestaticapps\_partitionids](#input\_custom\_privatelink\_azurestaticapps\_partitionids) | As a uncertanty in the partition id for the azure static web app, this variable is used to specify the partition ids deployed for the azure static web app private DNS zones.<br>For more information, please refer to: https://learn.microsoft.com/en-us/azure/private-link/private-endpoint-dns#web and https://learn.microsoft.com/en-us/azure/static-web-apps/private-endpoint | `list(number)` | <pre>[<br>  1,<br>  2,<br>  3,<br>  4,<br>  5<br>]</pre> | no |
| <a name="input_custom_settings_by_resource_type"></a> [custom\_settings\_by\_resource\_type](#input\_custom\_settings\_by\_resource\_type) | If specified, allows full customization of common settings for all resources (by type) deployed by this module. | `any` | `{}` | no |
| <a name="input_existing_ddos_protection_plan_resource_id"></a> [existing\_ddos\_protection\_plan\_resource\_id](#input\_existing\_ddos\_protection\_plan\_resource\_id) | If specified, module will skip creation of DDoS Protection Plan and use existing. | `string` | `""` | no |
| <a name="input_existing_virtual_wan_resource_group_name"></a> [existing\_virtual\_wan\_resource\_group\_name](#input\_existing\_virtual\_wan\_resource\_group\_name) | If specified, module will skip creation of the Virtual WAN resource group and use existing. All Virtual Hubs created by the module will be created in the specified Virtual WAN resource group. | `string` | `""` | no |
| <a name="input_existing_virtual_wan_resource_id"></a> [existing\_virtual\_wan\_resource\_id](#input\_existing\_virtual\_wan\_resource\_id) | If specified, module will skip creation of the Virtual WAN and use existing. All Virtual Hubs created by the module will be associated with the specified Virtual WAN. | `string` | `""` | no |
| <a name="input_location"></a> [location](#input\_location) | Sets the default location used for resource deployments where needed. | `string` | `"eastus"` | no |
| <a name="input_resource_group_per_virtual_hub_location"></a> [resource\_group\_per\_virtual\_hub\_location](#input\_resource\_group\_per\_virtual\_hub\_location) | If set to true, module will place each Virtual Hub (and associated resources) in a location-specific Resource Group. Default behaviour is to colocate Virtual Hub resources in the same Resource Group as the Virtual WAN resource. | `bool` | `false` | no |
| <a name="input_resource_prefix"></a> [resource\_prefix](#input\_resource\_prefix) | If specified, will set the resource name prefix for connectivity resources (default value determined from "var.root\_id"). | `string` | `""` | no |
| <a name="input_resource_suffix"></a> [resource\_suffix](#input\_resource\_suffix) | If specified, will set the resource name suffix for connectivity resources. | `string` | `""` | no |
| <a name="input_settings"></a> [settings](#input\_settings) | If specified, will customize the "Connectivity" landing zone settings and resources. | <pre>object({<br>    hub_networks = optional(list(<br>      object({<br>        enabled = optional(bool, true)<br>        config = object({<br>          address_space                = list(string)<br>          location                     = optional(string, "")<br>          link_to_ddos_protection_plan = optional(bool, false)<br>          dns_servers                  = optional(list(string), [])<br>          bgp_community                = optional(string, "")<br>          subnets = optional(list(<br>            object({<br>              name                      = string<br>              address_prefixes          = list(string)<br>              network_security_group_id = optional(string, "")<br>              route_table_id            = optional(string, "")<br>            })<br>          ), [])<br>          virtual_network_gateway = optional(object({<br>            enabled = optional(bool, false)<br>            config = optional(object({<br>              address_prefix              = optional(string, "")<br>              gateway_sku_expressroute    = optional(string, "")<br>              gateway_sku_vpn             = optional(string, "")<br>              remote_vnet_traffic_enabled = optional(bool, false)<br>              virtual_wan_traffic_enabled = optional(bool, false)<br>              advanced_vpn_settings = optional(object({<br>                enable_bgp                       = optional(bool, null)<br>                active_active                    = optional(bool, null)<br>                private_ip_address_allocation    = optional(string, "")<br>                default_local_network_gateway_id = optional(string, "")<br>                vpn_client_configuration = optional(list(<br>                  object({<br>                    address_space = list(string)<br>                    aad_tenant    = optional(string, null)<br>                    aad_audience  = optional(string, null)<br>                    aad_issuer    = optional(string, null)<br>                    root_certificate = optional(list(<br>                      object({<br>                        name             = string<br>                        public_cert_data = string<br>                      })<br>                    ), [])<br>                    revoked_certificate = optional(list(<br>                      object({<br>                        name       = string<br>                        thumbprint = string<br>                      })<br>                    ), [])<br>                    radius_server_address = optional(string, null)<br>                    radius_server_secret  = optional(string, null)<br>                    vpn_client_protocols  = optional(list(string), null)<br>                    vpn_auth_types        = optional(list(string), null)<br>                  })<br>                ), [])<br>                bgp_settings = optional(list(<br>                  object({<br>                    asn         = optional(number, null)<br>                    peer_weight = optional(number, null)<br>                    peering_addresses = optional(list(<br>                      object({<br>                        ip_configuration_name = optional(string, null)<br>                        apipa_addresses       = optional(list(string), null)<br>                      })<br>                    ), [])<br>                  })<br>                ), [])<br>                custom_route = optional(list(<br>                  object({<br>                    address_prefixes = optional(list(string), [])<br>                  })<br>                ), [])<br>              }), {})<br>            }), {})<br>          }), {})<br>          azure_firewall = optional(object({<br>            enabled = optional(bool, false)<br>            config = optional(object({<br>              address_prefix                = optional(string, "")<br>              address_management_prefix     = optional(string, "")<br>              enable_dns_proxy              = optional(bool, true)<br>              dns_servers                   = optional(list(string), [])<br>              sku_tier                      = optional(string, "Standard")<br>              base_policy_id                = optional(string, "")<br>              private_ip_ranges             = optional(list(string), [])<br>              threat_intelligence_mode      = optional(string, "Alert")<br>              threat_intelligence_allowlist = optional(map(list(string)), {})<br>              availability_zones = optional(object({<br>                zone_1 = optional(bool, true)<br>                zone_2 = optional(bool, true)<br>                zone_3 = optional(bool, true)<br>              }), {})<br>            }), {})<br>          }), {})<br>          spoke_virtual_network_resource_ids      = optional(list(string), [])<br>          enable_outbound_virtual_network_peering = optional(bool, false)<br>          enable_hub_network_mesh_peering         = optional(bool, false)<br>        })<br>      })<br>    ), [])<br>    vwan_hub_networks = optional(list(<br>      object({<br>        enabled = optional(bool, true)<br>        config = object({<br>          address_prefix = string<br>          location       = string<br>          sku            = optional(string, "")<br>          routes = optional(list(<br>            object({<br>              address_prefixes    = list(string)<br>              next_hop_ip_address = string<br>            })<br>          ), [])<br>          routing_intent = optional(object({<br>            enabled = optional(bool, false)<br>            config = optional(object({<br>              routing_policies = optional(list(object({<br>                name         = string<br>                destinations = list(string)<br>              })), [])<br>            }), {})<br>          }), {})<br>          expressroute_gateway = optional(object({<br>            enabled = optional(bool, false)<br>            config = optional(object({<br>              scale_unit                    = optional(number, 1)<br>              allow_non_virtual_wan_traffic = optional(bool, false)<br>            }), {})<br>          }), {})<br>          vpn_gateway = optional(object({<br>            enabled = optional(bool, false)<br>            config = optional(object({<br>              bgp_settings = optional(list(<br>                object({<br>                  asn         = number<br>                  peer_weight = number<br>                  instance_0_bgp_peering_address = optional(list(<br>                    object({<br>                      custom_ips = list(string)<br>                    })<br>                  ), [])<br>                  instance_1_bgp_peering_address = optional(list(<br>                    object({<br>                      custom_ips = list(string)<br>                    })<br>                  ), [])<br>                })<br>              ), [])<br>              routing_preference = optional(string, "Microsoft Network")<br>              scale_unit         = optional(number, 1)<br>            }), {})<br>          }), {})<br>          azure_firewall = optional(object({<br>            enabled = optional(bool, false)<br>            config = optional(object({<br>              enable_dns_proxy              = optional(bool, true)<br>              dns_servers                   = optional(list(string), [])<br>              sku_tier                      = optional(string, "Standard")<br>              base_policy_id                = optional(string, "")<br>              private_ip_ranges             = optional(list(string), [])<br>              threat_intelligence_mode      = optional(string, "Alert")<br>              threat_intelligence_allowlist = optional(map(list(string)), {})<br>              availability_zones = optional(object({<br>                zone_1 = optional(bool, true)<br>                zone_2 = optional(bool, true)<br>                zone_3 = optional(bool, true)<br>              }), {})<br>            }), {})<br>          }), {})<br>          spoke_virtual_network_resource_ids        = optional(list(string), [])<br>          secure_spoke_virtual_network_resource_ids = optional(list(string), [])<br>          enable_virtual_hub_connections            = optional(bool, false)<br>        })<br>      })<br>    ), [])<br>    ddos_protection_plan = optional(object({<br>      enabled = optional(bool, false)<br>      config = optional(object({<br>        location = optional(string, "")<br>      }), {})<br>    }), {})<br>    dns = optional(object({<br>      enabled = optional(bool, true)<br>      config = optional(object({<br>        location = optional(string, "")<br>        enable_private_link_by_service = optional(object({<br>          azure_api_management                 = optional(bool, true)<br>          azure_app_configuration_stores       = optional(bool, true)<br>          azure_arc                            = optional(bool, true)<br>          azure_arc_guest_configuration        = optional(bool, true)<br>          azure_arc_hybrid_resource_provider   = optional(bool, true)<br>          azure_arc_kubernetes                 = optional(bool, true)<br>          azure_automation_dscandhybridworker  = optional(bool, true)<br>          azure_automation_webhook             = optional(bool, true)<br>          azure_backup                         = optional(bool, true)<br>          azure_batch_account                  = optional(bool, true)<br>          azure_bot_service_bot                = optional(bool, true)<br>          azure_bot_service_token              = optional(bool, true)<br>          azure_cache_for_redis                = optional(bool, true)<br>          azure_cache_for_redis_enterprise     = optional(bool, true)<br>          azure_container_registry             = optional(bool, true)<br>          azure_cosmos_db_cassandra            = optional(bool, true)<br>          azure_cosmos_db_gremlin              = optional(bool, true)<br>          azure_cosmos_db_mongodb              = optional(bool, true)<br>          azure_cosmos_db_sql                  = optional(bool, true)<br>          azure_cosmos_db_table                = optional(bool, true)<br>          azure_data_explorer                  = optional(bool, true)<br>          azure_data_factory                   = optional(bool, true)<br>          azure_data_factory_portal            = optional(bool, true)<br>          azure_data_health_data_services      = optional(bool, true)<br>          azure_data_lake_file_system_gen2     = optional(bool, true)<br>          azure_database_for_mariadb_server    = optional(bool, true)<br>          azure_database_for_mysql_server      = optional(bool, true)<br>          azure_database_for_postgresql_server = optional(bool, true)<br>          azure_databricks                     = optional(bool, true)<br>          azure_digital_twins                  = optional(bool, true)<br>          azure_event_grid_domain              = optional(bool, true)<br>          azure_event_grid_topic               = optional(bool, true)<br>          azure_event_hubs_namespace           = optional(bool, true)<br>          azure_file_sync                      = optional(bool, true)<br>          azure_hdinsights                     = optional(bool, true)<br>          azure_iot_dps                        = optional(bool, true)<br>          azure_iot_hub                        = optional(bool, true)<br>          azure_key_vault                      = optional(bool, true)<br>          azure_key_vault_managed_hsm          = optional(bool, true)<br>          azure_kubernetes_service_management  = optional(bool, true)<br>          azure_machine_learning_workspace     = optional(bool, true)<br>          azure_managed_disks                  = optional(bool, true)<br>          azure_managed_grafana                = optional(bool, true)<br>          azure_media_services                 = optional(bool, true)<br>          azure_migrate                        = optional(bool, true)<br>          azure_monitor                        = optional(bool, true)<br>          azure_openai_service                 = optional(bool, true)<br>          azure_purview_account                = optional(bool, true)<br>          azure_purview_studio                 = optional(bool, true)<br>          azure_relay_namespace                = optional(bool, true)<br>          azure_search_service                 = optional(bool, true)<br>          azure_service_bus_namespace          = optional(bool, true)<br>          azure_site_recovery                  = optional(bool, true)<br>          azure_sql_database_sqlserver         = optional(bool, true)<br>          azure_synapse_analytics_dev          = optional(bool, true)<br>          azure_synapse_analytics_sql          = optional(bool, true)<br>          azure_synapse_studio                 = optional(bool, true)<br>          azure_virtual_desktop                = optional(bool, true)<br>          azure_web_apps_sites                 = optional(bool, true)<br>          azure_web_apps_static_sites          = optional(bool, true)<br>          cognitive_services_account           = optional(bool, true)<br>          microsoft_power_bi                   = optional(bool, true)<br>          signalr                              = optional(bool, true)<br>          signalr_webpubsub                    = optional(bool, true)<br>          storage_account_blob                 = optional(bool, true)<br>          storage_account_file                 = optional(bool, true)<br>          storage_account_queue                = optional(bool, true)<br>          storage_account_table                = optional(bool, true)<br>          storage_account_web                  = optional(bool, true)<br>        }), {})<br>        private_link_locations                                 = optional(list(string), [])<br>        public_dns_zones                                       = optional(list(string), [])<br>        private_dns_zones                                      = optional(list(string), [])<br>        enable_private_dns_zone_virtual_network_link_on_hubs   = optional(bool, true)<br>        enable_private_dns_zone_virtual_network_link_on_spokes = optional(bool, true)<br>        virtual_network_resource_ids_to_link                   = optional(list(string), [])<br>      }), {})<br>    }), {})<br>  })</pre> | `{}` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | If specified, will set the default tags for all resources deployed by this module where supported. | `map(string)` | `{}` | no |

## Resources

No resources.

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_configuration"></a> [configuration](#output\_configuration) | Returns the configuration settings for resources to deploy for the connectivity solution. |
| <a name="output_debug"></a> [debug](#output\_debug) | Returns the debug output for the module. |

<!-- markdownlint-enable -->
<!-- END_TF_DOCS -->